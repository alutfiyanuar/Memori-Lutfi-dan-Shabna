<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lutfi & Shabna</title>
    <link rel="icon" href="img/love-letter.png" type="image/x-icon">

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cherry+Cream+Soda&family=Chicle&family=Handlee&family=Italianno&family=Pacifico&family=Press+Start+2P&family=Purple+Purse&family=Sacramento&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Spicy+Rice&family=Work+Sans:ital,wght@0,100..900;1,100..900&family=Yesteryear&display=swap" rel="stylesheet">
<!-- Countdown -->
    <link rel="stylesheet" href="countdown/default.min.css" />
    <script src="countdown/simplyCountdown.umd.js"></script>

    <!-- Bootstrap Icons -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>

    <!-- Halaman Utama -->
    <section id="hero" class="hero w-100 h-100 p-3 mx-auto text-center d-flex justify-content-center align-items-center text-white"
    >
      <main>
        <h4>Arsip Memori</h4>
        <h1>Lutfi & Shabna</h1>
        <p>Kami sudah bersama selama: </p>
        <div class="simply-countdown"></div>
        <br>
        <a href="#home" class="btn btn-lg mt-3" onClick="enableScroll()">Lihat Kisah</a>
        
      </main>
    </section>

    <!-- Navigasi -->
    <nav class="navbar navbar-expand sticky-top mynavbar">
      <div class="container">
          <div class="offcanvas-body ">
            <ul class="navbar-nav justify-content-center align-items-center text-center">
              <li class="nav-item">
                <a class="nav-link" href="#home">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#gallery">Gallery</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#rsvp">Note</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <!-- Home -->
    <section id="home" class="home w-100 h-100 d-flex">
      <div class="container">

        
        <div class="row justify-content-center">
          
          <div class="col-md-8 text-center">
            <h3>Perkenalan Tokoh</h3>
            <p> Kami telah menjalin hubungan sejak 19 Mei 2024 <br> Ini adalah kisah kami, setiap senyum, setiap pelukan, <br> setiap momen yang tak akan terlupakan. </p>
            
          </div>
        </div>
        <div class="row couple">
        <div class="col-lg-6 upi fade-up">
          <!-- Tambahkan gambar di sini -->
    <div class="cat-gif">
      <img src="img/cat.gif" alt="Cat GIF">
    </div>
          <div class="row lutfi align-items-center">
            <div class="col-8 text-end">
              <h2 class="">Lutfi</h2>
              <h4 class="">Lutfi Yanuar Ahmadi</h4>
              <p class="">Putra kedua dari <br> Bpk. Syamsiar Ahmadi<br>dan Ibu Rini Indriyati</p>
            </div>
            <div class="col-4">
              <!-- Tambahkan gambar di sini -->
    <div class="cat-gif">
      <img src="img/cat.gif" alt="Cat GIF">
    </div>
              <img src="img/Lutfi2.jpg" alt="Lutfi Yanuar" class="img-responsive">
            </div>
          </div>
        </div>

        <div class="col-lg-6 ana fade-up">
          <div class="row Shabna mb-4 align-items-center">
            <div class="col-4">
              <!-- Tambahkan gambar di sini -->
    <div class="cat2-gif">
      <img src="img/cat.gif" alt="Cat GIF" style="max-width: 50px; height: auto;">
    </div>
              <img src="img/Shabna2.jpg" alt="Shabna" class="img-responsive">
            </div>
            <div class="col-8">
              <!-- Tambahkan GIF star di sini -->
      <div class="love-gif">
        <img src="img/love.gif" alt="Star GIF">
      </div>
              <h2>Shabna</h2>
              <h4>Shabna Achmad</h4>
              <p>Putri kedua dari <br> Bpk. Achmad Bugis<br>dan Ibu Nadiroh</p>
            </div>
          </div>
        </div>            
        </div>

        <div class="row justify-content-center">
          <div class="col-md-8 col-10 text-center ayat fade-up">
            <h7>" Dan di antara tanda-tanda kekuasaan-Nya diciptakan-Nya untukmu pasangan hidup dari jenismu sendiri supaya kamu dapat ketenangan hati dan dijadikannya kasih sayang di antara kamu. Sesungguhnya yang demikian menjadi tanda-tanda kebesaran-Nya bagi orang-orang yang berpikir. <br> ( Q.S. Ar-Rum: 21 )"</h7>
            <br> <br> <br>
          </div>
        </div>
      </div>
    </section>

    <!-- Galerry -->
    <section id="gallery" class="gallery">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-10 text-center">
            <span>Our Memories</span>
            <h2>Gallery Foto</h2>
            <p class="mt-4">✨ I'll keeping you in every memory ✨</p>
          </div>
        </div>

        <div class="row row-cols-lg-4 row-cols-md-3 row-cols-sm-3 row-cols-2 justify-content-center">
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/15bet5Ce8kYaF0taeVGgt4AVNubDuw0b4?usp=drive_link" target="_blank" data-caption="TMII" data-gallery="mygallery">
              <img src="img/gallery/tmii.png" alt="Lutfi & Shabna 1" class="img-fluid w-100 rounded">
            </a>
            <p>Taman Mini</p>
          </div>
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/1L6gbRwM4xe7ICAHOrqd8ndt2KvRdD0ni?usp=drive_link" target="_blank" data-caption="Kondangan" data-gallery="mygallery">
              <img src="img/gallery/kondangan.png" alt="Lutfi & Shabna 2" class="img-fluid w-100 rounded">
            </a>
            <p>Kondangan</p>
          </div>
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/1--yI-tpBpNllQd95I369BX_kFEJz8-Yu?usp=drive_link" target="_blank" data-caption="M Bloc Space" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/mbloc.png" alt="Lutfi & Shabna 3" class="img-fluid w-100 rounded">
            </a> 
            <p>M Bloc Space</p>
          </div>
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/1-usxSDSwAYe3GV4qBypBpIMZHc5r7PfS?usp=drive_link" target="_blank" data-caption="Ancol" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/ancol.png" alt="Lutfi & Shabna4" class="img-fluid w-100 rounded">
            </a> 
            <p>Ancol</p>
          </div>
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/1-1sQxbwAW3t8p7YbyQU2371oL8bHq68n?usp=drive_link" target="_blank" data-caption="Puncak" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/puncak.png" alt="Lutfi & Shabna 5" class="img-fluid w-100 rounded">
            </a>
            <p>Puncaak</p>
          </div>
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/1R2r_i6kkx4Ytk7i2pKLHbMOTNWzuBksi?usp=drive_link" target="_blank" data-caption="Kebun Raya Cibodas" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/krc.png" alt="Lutfi & Shabna 6" class="img-fluid w-100 rounded">
            </a>
            <p>Kebun Raya Cibodas</p>
            </div>
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/1_PQlDRpcwMM42v5f2Exjbo0bahTh4dTT?usp=drive_link" target="_blank" data-caption="Curug Cibereum" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/curug.png" alt="Lutfi & Shabna 6" class="img-fluid w-100 rounded">
            </a>
            <p>Curug Cibereum</p>
            </div>
          <div class="col mt-3 fade-up">
            <a href="https://drive.google.com/drive/folders/11nnGjx2ev2jHjyRUDNnoLS1sKH8RGKg-?usp=drive_link" target="_blank" data-caption="Triple" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/triple.png" alt="Lutfi & Shabna 6" class="img-fluid w-100 rounded">
            </a>
            <p>Triple Date Post Bloc</p>
          </div>
          <div class="col mt-3 fade-up">
            <a href="img/gallery/soon1.png" data-toggle="lightbox" data-caption="None" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/soon1.png" alt="Lutfi & Shabna 6" class="img-fluid w-100 rounded">
            </a>
            <p>Next Date</p>
          </div>
          <div class="col mt-3 fade-up">
            <a href="img/gallery/soon2.png" data-toggle="lightbox" data-caption="None" data-gallery="mygallery">
              <img src="img/gallery/thumbnail/soon2.png" alt="Lutfi & Shabna 6" class="img-fluid w-100 rounded">
            </a>
            <p>Next Date</p>
          </div>
          
        </div>

        
        
      </div>
    </section>

    <!-- RSVP -->
    <section id="rsvp" class="rsvp">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-10 text-center">
            <span>Catatan dan Komentar</span>
            <h2>Note</h2>
            <p>Tinggalkan pesan untuk kami melalui kolom berikut:</p>
          </div>
        </div>

        <div class="row justify-content-center">
          <div class="comment-section py-2 commentbox" style="max-width: 460px">

        <!-- Comment Form -->
        <div class="card mb-4 fade-up">
          <div class="card-body">
            <!-- Tambahkan gambar di sini -->
    <div style="position: absolute; top: -35px; right: 15px; z-index: 10;">
      <img src="img/cat.gif" alt="Cat GIF" style="max-width: 50px; height: auto;">
    </div>
            <div class="jumlah-komen">
              <i class="bi bi-chat-left-text"></i>
              <span id="jumlah-comment" class="jumlah-comment" name="jumlah">0</span>
              <span class="comment2">Komentar</span></div>
            <form
method="POST"
action='https://script.google.com/macros/s/AKfycbxEpqmhEBeDxLm_PNtT0nQgK1cXxZ3UWaAC1ozfPvHmvb0bo5MV_KyNESmAkEN-thIM/exec' id="my-form">
              <div class="mb-3 content">
                <input
                  type="text"
                  class="user form-control"
                  id="commentName"
                  placeholder="Nama Anda"
                  name="commentName"
                />
              </div>
              <div class="mb-3 commentinput">
                <textarea
                type="text"
                  class="usercomment form-control"
                  id="comments"
                  rows="3"
                  placeholder="Catatan"
                  name="comments"
                ></textarea>
                <!-- Bagian Avatar Pilihan -->
<div class="mb-3 avatar-selection">
  <label class="form-label">Pilih Avatar:</label>
  <!-- Wadah untuk avatar -->
  <div id="avatar-options" class="avatar-options">
    <div class="avatar-box" data-avatar="ava1.png">
      <img src="ava1.png" alt="Ava 1" class="avatar-option">
    </div>
    <div class="avatar-box" data-avatar="ava2.png">
      <img src="ava2.png" alt="Ava 2" class="avatar-option">
    </div>
    <div class="avatar-box" data-avatar="ava3.png">
      <img src="ava3.png" alt="Ava 3" class="avatar-option">
    </div>
    <div class="avatar-box" data-avatar="ava4.png">
      <img src="ava4.png" alt="Ava 4" class="avatar-option">
    </div>
    <div class="avatar-box" data-avatar="ava5.png">
      <img src="ava5.png" alt="Ava 5" class="avatar-option">
    </div>
  </div>
  <!-- Input tersembunyi untuk menyimpan nilai avatar yang dipilih -->
  <input type="hidden" id="selected-avatar" name="avatar" value="ava1.png"> <!-- Default value -->
</div>
              </div class="buttons">
              <button type="submit" class="btn btn-primary" disabled id="publish"><i class="bi bi-send"></i>
                Kirim
              </button>

            </form>

             
          </div>
          <div class="comments"></div>
        </div>

       
          </div>
        </div>
        <!-- Tambahkan GIF potz di sini -->
    <div class="potz-gif">
      <img src="img/potz.gif" alt="Potz GIF">
    </div>

    <div class="musik-gif">
      <img src="img/musik.gif" alt="Musik GIF">
    </div>

  </div>
  <div class="comments"></div>
</div>
    </section>

    <!-- GIFT -->

    <footer>
      <div class="container">
        <div class="row">
          <div class="col text-center">
            <small class="block">&copy; 2025 Lutfi Shabna. All Right Reserved.</small>
            <small class="block">Design By <a href="https://www.instagram.com/alutfiyanuar/" target="_blank">@alutfiyanuar</a></small>
            <ul class="mt-3">
              <li ><a href="https://www.instagram.com/alutfiyanuar/" target="_blank"><i class="bi bi-instagram"></i></a></li>
              <li ><a href="https://www.tiktok.com/@lutfiyanuara" target="_blank"><i class="bi bi-tiktok"></i></a></li>
              <li ><a href="https://m.facebook.com/lutfiyanuar/" target="_blank"><i class="bi bi-facebook"></i></a></li>
              <li ><a href="https://wa.link/tflsyo" target="_blank"><i class="bi bi-whatsapp"></i></a></li>
              <li ><a href="https://x.com/alutfiyanuar?t=lK9XcZc58Akg3V7oL-Z8CA&s=09" target="_blank"><i class="bi bi-twitter-x"></i></a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <div id="audio-container">
      <audio id="song" autoplay loop>
        <source src="song.mp3" type="audio/mp3">
      </audio>
    

      <div class="audio-icon" style="display: none;" >
        <i class="bi bi-disc"></i>
      </div>
    </div>


    <!-- JAVASCRIPT -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/bs5-lightbox@1.8.5/dist/index.bundle.min.js"></script>
    <!-- Javascript Simply Countdown -->
   <script>
  simplyCountdown(".simply-countdown", {
    year: 2024, // Tahun target (wajib)
    month: 5, // Bulan target [1-12] (wajib)
    day: 19, // Hari target [1-31] (wajib)
    hours: 20, // Jam target [0-23], default: 0
    minutes: 0, // Menit target [0-59], default: 0
    seconds: 0, // Detik target [0-59], default: 0
    words: {
      // Label kustom, dengan lambda untuk jamak
      days: {
        root: " Hari",
        lambda: (root, n) => (n > 1 ? root + "" : root), // Tidak digunakan saat countUp
      },
      hours: {
        root: " Jam",
        lambda: (root, n) => (n > 1 ? root + "" : root), // Tidak digunakan saat countUp
      },
      minutes: {
        root: " Menit",
        lambda: (root, n) => (n > 1 ? root + "" : root), // Tidak digunakan saat countUp
      },
      seconds: {
        root: " Detik",
        lambda: (root, n) => (n > 1 ? root + "" : root), // Tidak digunakan saat countUp
      },
    },
    plural: true, // Gunakan jamak untuk label
    inline: false, // Format inline: misalnya, "24 hari, 4 jam, 2 menit"
    inlineSeparator: ", ", // Pemisah untuk format inline, default: ", "
    inlineClass: "simply-countdown-inline", // Kelas CSS untuk countdown inline
    enableUtc: false, // Gunakan waktu UTC jika true
    refresh: 1000, // Interval refresh dalam ms, default: 1000
    sectionClass: "simply-section", // Kelas CSS untuk setiap bagian countdown
    amountClass: "simply-amount", // Kelas CSS untuk nilai numerik
    wordClass: "simply-word", // Kelas CSS untuk label unit
    zeroPad: false, // Tambahkan nol di depan angka
    removeZeroUnits: false, // Hapus unit dengan nilai nol
    countUp: true, // <-- Ubah ini menjadi true untuk mengaktifkan hitung maju
    onEnd: () => {
      // Fungsi yang dipanggil saat countdown selesai
    },
    onStop: () => {
      // Fungsi yang dipanggil saat countdown dihentikan
    },
    onResume: () => {
      // Fungsi yang dipanggil saat countdown dilanjutkan
    },
    onUpdate: (params) => {
      // Fungsi yang dipanggil saat countdown diperbarui
      // Params berisi objek dengan nilai saat ini: { days, hours, minutes, seconds }
    },
  });

  // Kamu juga bisa menginisialisasi dengan Objek Javascript yang sudah ada.
  let myElement = document.querySelector(".my-countdown");
  simplyCountdown(myElement, {
    /* opsi */
  });

  let multipleElements = document.querySelectorAll(".my-countdown");
  simplyCountdown(multipleElements, {
    /* opsi */
  });
</script>

    <!-- JAVASCRIPT AVATAR -->

    <script src="https://cdn.jsdelivr.net/npm/@multiavatar/multiavatar/multiavatar.min.js"></script>

    <!-- Javascript Scroll Halaman Utama -->
            <!-- Javascript Audio Otomatis -->
    <script>
  const rootElement = document.querySelector(":root");
  const audioIcon = document.querySelector(".audio-icon");
  const logoAudio = document.querySelector(".audio-icon i");
  const song = document.querySelector("#song");
  let isPlaying = false; // Status lokal untuk UI

  // Fungsi untuk memainkan audio dan menampilkan ikon
  function playAudio() {
    song.volume = 0.4; // Atur volume
    song.play()
      .then(() => {
        // Jika autoplay berhasil
        console.log("Audio berhasil diputar otomatis.");
        isPlaying = true;
        audioIcon.style.display = "flex"; // Tampilkan ikon
        logoAudio.classList.add("bi-disc"); // Gunakan ikon disc saat diputar
        logoAudio.classList.remove("bi-pause-circle");
      })
      .catch(error => {
        // Jika autoplay diblokir, tampilkan ikon untuk klik manual
        console.log("Autoplay diblokir atau gagal:", error);
        // Tampilkan ikon untuk pengguna bisa klik
        audioIcon.style.display = "flex";
        // Gunakan ikon pause atau disc statis sebagai indikator bahwa audio ada
        // Disini kita gunakan pause sebagai indikator bahwa audio *tidak* berjalan (karena autoplay gagal)
        logoAudio.classList.remove("bi-disc");
        logoAudio.classList.add("bi-pause-circle");
        // isPlaying tetap false karena autoplay gagal
        isPlaying = false;
      });
  }

  // Fungsi untuk mengaktifkan scroll (dipanggil oleh tombol)
  function enableScroll() {
    window.onscroll = function() {};
    rootElement.style.scrollBehavior = "smooth";
    // Panggil playAudio di sini juga jika tombol di klik *setelah* halaman dimuat
    // dan audio belum diputar otomatis
    if (!isPlaying) {
      console.log("Mencoba memutar audio dari tombol 'Lihat Kisah'...");
      playAudio();
    }
  }

  // Fungsi untuk menghentikan scroll awal
  function disableScroll() {
    scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

    window.onscroll = function() {
      window.scrollTo(scrollTop, scrollLeft);
    };

    rootElement.style.scrollBehavior = "auto";
  }

  // Tambahkan event listener untuk ikon audio
  audioIcon.onclick = function() {
    if (isPlaying) {
      // Jika sedang diputar, jeda
      song.pause();
      logoAudio.classList.remove("bi-disc");
      logoAudio.classList.add("bi-pause-circle");
      isPlaying = false;
    } else {
      // Jika sedang dijeda, coba mainkan lagi
      song.play()
        .then(() => {
          console.log("Audio diputar melalui klik ikon.");
          isPlaying = true;
          logoAudio.classList.add("bi-disc");
          logoAudio.classList.remove("bi-pause-circle");
        })
        .catch(error => {
          console.error("Gagal memutar audio saat diklik:", error);
          // Mungkin tampilkan pesan ke pengguna jika diperlukan
          // Misalnya, munculkan alert kecil atau tooltip
          alert("Browser memblokir pemutaran otomatis. Silakan klik ikon musik untuk memulainya.");
        });
    }
    // isPlaying sudah diperbarui di atas
  };

  // Panggil disableScroll saat halaman dimuat
  disableScroll();

  // Coba mainkan audio secara otomatis saat halaman selesai dimuat
  window.addEventListener("load", function() {
    // Tambahkan jeda kecil (misalnya 2 detik) sebelum mencoba autoplay
    console.log("Mencoba autoplay setelah jeda 2 detik...");
    setTimeout(() => {
      playAudio();
    }, 1000); // 2000 milidetik = 2 detik
  });

    </script> 
 
      <!-- Javascript Kolom komentar -->
   <script>
  "use strict";
  const userId = {
    name: null,
    identity: null,
    image: null,
    message: null,
    date: null,
  };
  const userComment = document.querySelector(".usercomment");
  const publishBtn = document.querySelector("#publish");
  const comments = document.querySelector(".comments");
  const userName = document.querySelector(".user");

  // Fungsi untuk mendapatkan avatar acak (opsional, untuk fallback)
  function getRandomAvatar() {
    const avatarCount = 5; // Jumlah avatar yang tersedia (ava1.png hingga ava5.png)
    const randomIndex = Math.floor(Math.random() * avatarCount) + 1; // Generate angka 1-5
    return `ava${randomIndex}.png`;
  }

  // Validasi input komentar
  userComment.addEventListener("input", e => {
    if (!userComment.value) {
      publishBtn.setAttribute("disabled", "disabled");
    } else {
      publishBtn.removeAttribute("disabled");
    }
  });

  function addPost() {
    if (!userComment.value) return;

    userId.name = userName.value || "Anonymous";
    // Ambil avatar dari input tersembunyi yang diatur oleh klik avatar
    userId.image = document.getElementById('selected-avatar').value;
    userId.message = userComment.value;
    userId.date = new Date().toLocaleDateString();

    let publihsed = `
      <div class="parents">
        <img src="${userId.image}" alt="User">
        <div class="box">
          <h1>${userId.name}</h1>
          <span class="date">${userId.date}</span>
          <p>${userId.message}</p>
          <div class="reactions">
            <button class="reaction-btn" onclick="likeComment(this)">
              <i class="bi bi-heart"></i> Suka
            </button>
            <span class="reaction-count">0</span>
          </div>
        </div>
      </div>`;

    comments.innerHTML =  publihsed + comments.innerHTML;

    // Update jumlah komentar
    let commentsNum = document.querySelectorAll(".parents").length;
    document.getElementById("jumlah-comment").textContent = commentsNum;
  }

  publishBtn.addEventListener("click", addPost);

  // Load komentar dari Google Sheets saat halaman dibuka
window.addEventListener("load", function () {
    const commentsContainer = document.querySelector(".comments");
    const commentCountElement = document.getElementById("jumlah-comment");

    fetch('https://script.google.com/macros/s/AKfycbxEpqmhEBeDxLm_PNtT0nQgK1cXxZ3UWaAC1ozfPvHmvb0bo5MV_KyNESmAkEN-thIM/exec')
      .then(response => response.json())
      .then(data => {
        if (data.length > 0) {
          data.forEach(entry => {
            const name = entry["commentName"] || "Anonymous";
            const message = entry["comments"] || "";
            
            // ✅ Gunakan timestamp dari spreadsheet
            let date;
            try {
              // Jika timestamp adalah string ISO
              date = new Date(entry.timestamp).toLocaleDateString();
            } catch (error) {
              // Fallback jika timestamp tidak valid
              console.error("Invalid date:", entry.timestamp);
              date = new Date().toLocaleDateString(); // Atau gunakan default
            }

            const likes = entry["likes"] || 0;
            const avatar = entry["avatar"] || getRandomAvatar();

            const publihsed = `
              <div class="parents">
                <img src="${avatar}" alt="User">
                <div class="box">
                  <h1>${name}</h1>
                  <!-- Sekarang akan menampilkan tanggal dari sheet -->
                  <span class="date">${date}</span>
                  <p>${message}</p>
                  <div class="reactions">
                    <button class="reaction-btn" onclick="likeComment(this )">
                      <i class="bi bi-heart"></i> Suka
                    </button>
                    <span class="reaction-count" >${likes}</span>
                  </div>
                </div>
              </div>`;
            comments.innerHTML =  publihsed + comments.innerHTML ;
          });

          const commentsNum = data.length;
          commentCountElement.textContent = commentsNum;
        }
      })
      .catch(error => {
        console.error("Error loading comments:", error);
      });
});
</script>

<!-- FUNGSI LIKE COMMENT -->
 <script>
  // Fungsi Like/Unlike Comment
window.likeComment = function(button) {
  const reactionCount = button.nextElementSibling;
  let count = parseInt(reactionCount.textContent);
  const icon = button.querySelector("i");

  // Jika sudah di-like (warna merah), maka unlike
  if (icon.classList.contains("bi-heart-fill")) {
    icon.classList.remove("bi-heart-fill");
    icon.classList.add("bi-heart");
    icon.style.color = ""; // Reset warna ke default
    count = Math.max(0, count - 1); // Kurangi jumlah like, pastikan tidak negatif
  } else {
    // Jika belum di-like, tambahkan like
    icon.classList.remove("bi-heart");
    icon.classList.add("bi-heart-fill");
    icon.style.color = "#d9534f"; // Warna merah saat di-like
    count++; // Tambah jumlah like
  }

  reactionCount.textContent = count;

  // Kirim jumlah like terbaru ke Google Apps Script
  const commentBox = button.closest('.box');
  const commentText = commentBox.querySelector('p').textContent;
  const commentName = commentBox.querySelector('h1').textContent;

  const formData = new FormData();
  formData.append('commentName', commentName);
  formData.append('comments', commentText);
  formData.append('likes', count);
  // Tambahkan parameter action untuk membedakan permintaan
  formData.append('action', 'like');

    fetch('https://script.google.com/macros/s/AKfycbxEpqmhEBeDxLm_PNtT0nQgK1cXxZ3UWaAC1ozfPvHmvb0bo5MV_KyNESmAkEN-thIM/exec', { // Gunakan URL deployment terbaru
    method: 'POST',
    body: formData,
  })
  .then(response => response.json())
  .then(data => {
    console.log('Update like response:', data); // Untuk debugging
    if (data.result !== 'success') {
      console.error('Error updating like:', data.error);
      // Opsional: Kembalikan UI ke keadaan sebelumnya jika gagal
      // reactionCount.textContent = parseInt(reactionCount.textContent) + (icon.classList.contains("bi-heart-fill") ? -1 : 1);
      // icon.classList.toggle("bi-heart-fill");
      // icon.classList.toggle("bi-heart");
      // icon.style.color = icon.classList.contains("bi-heart") ? "" : "#d9534f";
    }
  })
  .catch(error => {
    console.error('Error fetching update like:', error);
    // Opsional: Kembalikan UI ke keadaan sebelumnya jika gagal
    // reactionCount.textContent = parseInt(reactionCount.textContent) + (icon.classList.contains("bi-heart-fill") ? -1 : 1);
    // icon.classList.toggle("bi-heart-fill");
    // icon.classList.toggle("bi-heart");
    // icon.style.color = icon.classList.contains("bi-heart") ? "" : "#d9534f";
  });
};
 </script>

<!-- Script submit form dan likes (menggantikan yang lama) -->
<script>
  window.addEventListener("load", function() {
    const form = document.getElementById('my-form');
    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const data = new FormData(form);
      const action = e.target.action;
      fetch(action, {
        method: 'POST',
        body: data,
      })
      .then(response => response.json())
      .then(data => {
         console.log('Submit response:', data); // Untuk debugging
         if (data.result === 'success') {
             // Kosongkan form setelah sukses
             form.reset();
             publishBtn.setAttribute("disabled", "disabled"); // Nonaktifkan tombol kembali jika textarea kosong
             // Tidak perlu reload halaman, komentar baru akan muncul saat refresh atau ditambahkan secara dinamis jika diinginkan
         } else {
             console.error('Error submitting comment:', data.error);
             alert('Gagal mengirim komentar: ' + (data.error || 'Tidak diketahui'));
         }
      })
      .catch(error => {
          console.error('Error fetching submit:', error);
          alert('Gagal mengirim komentar: ' + error);
      });
    });

    // Hapus event listener untuk form 'my-likes' karena tidak digunakan
    // const likekomen = document.getElementById('my-likes');
    // likekomen.addEventListener("submit", function(e) { ... });
  });
</script>



<script>
     function copylutfi() {
     const text = document.getElementById("reankingShabna").innerText; // Ambil teks dari elemen
     navigator.clipboard.writeText(text); // Salin teks ke clipboard
   }

   function copyShabna() {
     const text = document.getElementById("reankingShabna").innerText; // Ambil teks dari elemen
     navigator.clipboard.writeText(text); // Salin teks ke clipboard
   }
</script>


<script>
  const urlParams = new URLSearchParams(window.location.search);
  const nama = urlParams.get("n") || "";
  const pronoun = urlParams.get("p") || "Bapak/Ibu/Saudara/i";

const namaContainer = document.querySelector(".hero h4 span");
namaContainer.innerText = `${pronoun} ${nama},`.replace(/ ,$/, ",");

document.querySelector("#commentName").value = nama;
</script>

<!-- JAVASCRIPT ANIMASI -->
<script>
  // Fungsi animasi fade up saat scroll
  const faders = document.querySelectorAll(".fade-up");
  const sections = document.querySelectorAll("section");

  const appearOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px"
  };

  const appearOnScroll = new IntersectionObserver(function(entries, observer) {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      entry.target.classList.add("visible");
      observer.unobserve(entry.target);
    });
  }, appearOptions);

  [...faders, ...sections].forEach(el => {
    el.classList.add("fade-up");
    appearOnScroll.observe(el);
  });
</script>

<!-- JAVASCRIPT AVATAR CLICK HANDLER -->
<script>
// Tangani klik pada gambar avatar
document.addEventListener('DOMContentLoaded', function() {
    const avatarBoxes = document.querySelectorAll('.avatar-box'); // Ambil semua kotak avatar
    const selectedAvatarInput = document.getElementById('selected-avatar');

    // Fungsi untuk memberikan getaran jika didukung
    function triggerVibration(duration = 50) { // Durasi dalam milidetik (default 50ms)
        if ('vibrate' in navigator) {
            navigator.vibrate(duration);
        } else {
            // console.log("Vibration API tidak didukung di browser ini.");
            // Anda bisa menambahkan fallback visual di sini jika diinginkan
        }
    }

    // Fungsi untuk memperbarui tampilan avatar dan input tersembunyi
    function selectAvatar(avatarValue, clickedBox) {
        // Hapus kelas 'selected' dari semua kotak avatar
        avatarBoxes.forEach(box => {
            box.classList.remove('selected');
        });

        // Tambahkan kelas 'selected' ke kotak avatar yang dipilih
        if (clickedBox) {
            clickedBox.classList.add('selected');
        }

        // Perbarui nilai input tersembunyi
        selectedAvatarInput.value = avatarValue;

        // --- PENAMBAHAN FUNGSI VIBRATE ---
        // Picu getaran saat avatar dipilih
        triggerVibration(50); // Getar selama 50ms
        // -------------------------------
    }

    // Tambahkan event listener ke setiap kotak avatar
    avatarBoxes.forEach(box => {
        box.addEventListener('click', function() {
            const avatarValue = this.getAttribute('data-avatar');
            if (avatarValue) {
                selectAvatar(avatarValue, this); // Kirim elemen kotak yang diklik
            }
        });
    });

    // Set default avatar (ava1.png) saat halaman dimuat
    const firstAvatarBox = document.querySelector('.avatar-box[data-avatar="ava1.png"]');
    if (firstAvatarBox) {
        selectAvatar('ava1.png', firstAvatarBox);
    }
});
</script>

  </body>
</html>

<!--   FUNGSI DISABBLE SCCROLL
localStorage.setItem("opened", "true");
if(!localStorage.getItem("opened")){
      -->
